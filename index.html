<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS Prep Center</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Hammer.js for swipe gestures -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>
</head>
<body>
    <div id="app">
        <!-- Auth Section -->
        <section id="auth-section" class="screen">
            <h1>IELTS Prep Login</h1>
            <form id="login-form">
                <input type="email" id="email" placeholder="Email" required>
                <input type="password" id="password" placeholder="Password" required>
                <button type="submit">Login</button>
            </form>
            <p id="auth-error" class="error"></p>
        </section>

        <!-- Student Dashboard -->
        <section id="student-dashboard" class="screen hidden">
            <header>
                <h2>Welcome, <span id="student-name"></span></h2>
                <button id="logout-btn">Logout</button>
            </header>
            <div id="student-info" class="card">
                <h3>Your Level: <span id="student-level">Pending</span></h3>
            </div>
            <div id="exercise-list">
                <!-- Exercises will be loaded here -->
            </div>
            <div class="card">
                <canvas id="progressChart"></canvas>
            </div>
            <button onclick="startMiniGame()">Take a Break (Game)</button>
        </section>

        <!-- Teacher Dashboard -->
        <section id="teacher-dashboard" class="screen hidden">
            <header>
                <h2>Teacher Panel</h2>
                <button id="teacher-logout-btn">Logout</button>
            </header>
            
            <!-- Views Container -->
            <div id="materials-view" class="view">
                <h3>Materials (A1-C1)</h3>
                <div id="materials-list">
                    <!-- Dynamic materials will go here -->
                    <p>Loading all levels A1 to C1...</p>
                </div>
            </div>

            <div id="groups-view" class="view hidden">
                <div id="group-management"></div>
                
                <div class="card" style="margin-top:15px;">
                    <h3>Register New Student</h3>
                    <form id="register-student-form">
                        <input type="email" id="reg-email" placeholder="Student Email" required style="margin-bottom:8px;">
                        <input type="password" id="reg-password" placeholder="Temp Password" required style="margin-bottom:8px;">
                        <button type="submit" style="width:100%">Create Student Account</button>
                    </form>
                </div>
            </div>

            <!-- Teacher Bottom Nav -->
            <nav class="bottom-nav">
                <button class="nav-item active" onclick="showTeacherView('materials')">
                    <i class="fas fa-book"></i>
                    <span>Materials</span>
                </button>
                <button class="nav-item" onclick="showTeacherView('groups')">
                    <i class="fas fa-users"></i>
                    <span>Groups</span>
                </button>
            </nav>
        </section>

        <!-- Exercise Screen -->
        <section id="exercise-screen" class="screen hidden">
            <div id="timer-display">00:00</div>
            
            <div id="reading-container" class="swipe-container hidden">
                <div id="passage" class="swipe-panel"></div>
                <div id="questions" class="swipe-panel"></div>
            </div>

            <div id="listening-container" class="card hidden">
                <p><strong>Listening Test:</strong> Answer based on the transcript read by the teacher.</p>
                <div id="listening-questions"></div>
            </div>

            <div id="writing-container" class="card hidden">
                <h3 id="writing-prompt-title">Writing Task</h3>
                <p id="writing-prompt"></p>
                <textarea id="writing-input" rows="10" placeholder="Type your essay here..."></textarea>
                <button id="submit-writing">Submit Answer</button>
            </div>

            <button id="back-to-dash">Back to Dashboard</button>
        </section>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase-config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/groups.js"></script>
    <script src="js/groupUI.js"></script>
    <script src="js/sessions.js"></script>
    <script src="js/timer.js"></script>
    <script src="js/exercises.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/game.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
